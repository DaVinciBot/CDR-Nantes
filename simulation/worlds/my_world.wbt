#VRML_SIM R2025a utf8

EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/R2025a/projects/objects/backgrounds/protos/TexturedBackground.proto"
EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/R2025a/projects/objects/backgrounds/protos/TexturedBackgroundLight.proto"
EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/R2025a/projects/objects/floors/protos/RectangleArena.proto"
EXTERNPROTO "../protos/three_omniwheel.proto"

WorldInfo {
  contactProperties [
    ContactProperties {
      material1 "OmniWheelMat"
      material2 "floor"
      coulombFriction [
        0.8
      ]
      bounce 0.1
      softCFM 0.0001
    }
  ]
}
Viewpoint {
  orientation -0.03831664554156323 0.03662725426154595 -0.9985941512545036 4.6659808926616035
  position 0.015947952845872273 -0.28184895378715946 0.01916202672881549
}
TexturedBackground {
}
TexturedBackgroundLight {
}
RectangleArena {
  floorSize 3 2
  wallHeight 0.07
}
Robot {
  translation -3.70379e-05 -1.33991 0.0268368
  rotation -0.9232252780865396 -0.38425911574345983 0.00013367904026573212 0.00326142
  children [
    DEF CORPS_DEPLACE Pose {
      translation 0 0 0.22
      children [
        DEF CORPS_SHAPE Shape {
          appearance PBRAppearance {
            baseColor 0 0 0
            transparency 0.8
            roughness 0.5
            metalness 0
          }
          geometry Box {
            size 0.3 0.4 0.375
          }
        }
      ]
    }
    DEF WHEEL_A_WRAPPER Pose {
      rotation 0 0 1 -1.0472
      children [
        DEF WHEEL_A_RADIUS Pose {
          translation 0 0.2 0
          children [
            HingeJoint {
              jointParameters HingeJointParameters {
                position -53.01471931566815
                axis 0 1 0
              }
              device [
                RotationalMotor {
                  name "motor1"
                  maxVelocity 20
                }
                PositionSensor {
                  name "encoder1"
                }
              ]
              endPoint Solid {
                translation 0.0034990129992900545 0.0013527191834032128 0.0005367693031173768
                rotation -0.007181784677779341 -0.9999681543459736 0.003480267626062316 1.183116953957758
                children [
                  DEF VISUAL_WHEEL_1 Transform {
                    rotation 0 0 1 -1.57
                    scale 0.001 0.001 0.001
                    children [
                      Shape {
                        appearance PBRAppearance {
                          baseColor 0.1 0.1 0.1
                          roughness 0.8
                        }
                        geometry Mesh {
                          url [
                            "../protos/meshes/roue.stl"
                          ]
                        }
                      }
                    ]
                  }
                  DEF ROUE_COLLISION Pose {
                    rotation 1 0 0 1.5708
                    children [
                      Shape {
                        appearance PBRAppearance {
                          baseColor 0.1 0.1 0.1
                          transparency 1
                          roughness 0.8
                          metalness 0
                        }
                        geometry Cylinder {
                          height 0.02
                          radius 0.03
                        }
                      }
                    ]
                  }
                ]
                name "wheel_solid_1"
                contactMaterial "OmniWheelMat"
                boundingObject USE ROUE_COLLISION
                physics Physics {
                  mass 0.2
                }
              }
            }
          ]
        }
      ]
    }
    DEF WHEEL_B_WRAPPER Pose {
      rotation 0 0 1 1.0472
      children [
        DEF WHEEL_B_RADIUS Pose {
          translation 0 0.2 0
          children [
            HingeJoint {
              jointParameters HingeJointParameters {
                position 521.7689470464898
                axis 0.5 0.866025 0
              }
              device [
                RotationalMotor {
                  name "motor2"
                  maxVelocity 20
                }
                PositionSensor {
                  name "encoder2"
                }
              ]
              endPoint Solid {
                translation -0.003232696894298255 -0.00016166641891839794 0.0010108712175341474
                rotation -0.007978022626059282 -0.9999600348781187 0.004034823605760079 5.4851853129854415
                children [
                  DEF VISUAL_WHEEL_2 Transform {
                    rotation 0 0 1 -1.57
                    scale 0.001 0.001 0.001
                    children [
                      Shape {
                        appearance PBRAppearance {
                          baseColor 0.1 0.1 0.1
                          roughness 0.8
                        }
                        geometry Mesh {
                          url [
                            "../protos/meshes/roue.stl"
                          ]
                        }
                      }
                    ]
                  }
                  USE ROUE_COLLISION
                ]
                name "wheel_solid_2"
                contactMaterial "OmniWheelMat"
                boundingObject USE ROUE_COLLISION
                physics Physics {
                  mass 0.2
                }
              }
            }
          ]
        }
      ]
    }
    DEF WHEEL_C_WRAPPER Pose {
      rotation 0 0 1 3.14159
      children [
        DEF WHEEL_C_RADIUS Pose {
          translation 0 0.2 0
          children [
            HingeJoint {
              jointParameters HingeJointParameters {
                position 701.5947784210991
                axis 0 1 0
              }
              device [
                RotationalMotor {
                  name "motor3"
                  maxVelocity 20
                }
                PositionSensor {
                  name "encoder3"
                }
              ]
              endPoint Solid {
                translation 0.004764112240599857 0.0008889910574271273 -8.173998515129729e-06
                rotation 0.0044043456445371325 0.9999863500931852 -0.0028109369884505063 4.2905524542629685
                children [
                  DEF VISUAL_WHEEL_3 Transform {
                    rotation 0 0 1 -1.57
                    scale 0.001 0.001 0.001
                    children [
                      Shape {
                        appearance PBRAppearance {
                          baseColor 0.1 0.1 0.1
                          roughness 0.8
                        }
                        geometry Mesh {
                          url [
                            "../protos/meshes/roue.stl"
                          ]
                        }
                      }
                    ]
                  }
                  USE ROUE_COLLISION
                ]
                name "wheel_solid_3"
                contactMaterial "OmniWheelMat"
                boundingObject USE ROUE_COLLISION
                physics Physics {
                  mass 0.2
                }
              }
            }
          ]
        }
      ]
    }
  ]
  name "robot secours"
  boundingObject USE CORPS_DEPLACE
  physics Physics {
    density -1
    mass 10
  }
  controller "<none>"
}
DEF OMNI_WHEELS three_omniwheel {
  translation 0 0 0.033
  supervisor TRUE
  controller "teensy_controller"
}
